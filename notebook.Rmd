# TODOs

```{r}
# TODO: TREAT ALL THE TODOs IN THIS FILE
```

# Install packages

```{r}
install.packages("NbClust")
# install.packages("factoextra")
install.packages("skmeans")
install.packages("movMF")
```

# Load data

```{r}
# Le lien pour télécharger les deux formats de données ainsi que les labels.
url <- "https://cifre.s3.eu-north-1.amazonaws.com/bbc_dataset.mat"
# Définir le nom du fichier de destination.
destination_file <- "bbc_dataset.mat"
# Télécharger le fichier.
download.file(url, destfile = destination_file, method = "auto")
install.packages("R.matlab")
library(R.matlab)
bbc_dataset <- readMat(destination_file)
bbc_jose <- bbc_dataset$jose
bbc_doc_term <- bbc_dataset$doc.term
bbc_labels <- as.vector(bbc_dataset$labels)
```

```{r}
dim(bbc_jose)
```

```{r}
dim(bbc_doc_term)
```

Quelle est la dimension de chaque dataset (nombre documents, nombre de mots/taille de la dimension) ? Le 1er dataset (la matrice document-terme, la variable bbc_doc_term) - nombre documents: 2225 - nombre de mots: 2000 Le 2eme dataset (la matrice des embeddings des documents, la variable bbc_jose) - nombre documents: 2225 - taille de la dimension: 100

# Clustering

```{r}
# TODO: explore different values of the parameters of skmeans and the other clustering algorithms
# TODO: try different values of k and try to prove that k=5 is the best one
```

## K-means

```{r}
# we use nbclust, and k = 5
library(NbClust)
set.seed(123)
# res.kmeans <- NbClust(bbc_jose, distance = "euclidean", min.nc = 2, max.nc = 10, method = "kmeans")
res.kmeans <- kmeans(bbc_jose, 5, nstart = 25)
# TODO: we are asked to use NbClust, not the function kmeans !!!

# # we use fviz_cluster to visualize the clusters without points labels
# library(factoextra)
# fviz_cluster(res.kmeans, data = bbc_jose, ellipse.type = "norm", 
#              palette = "jco", ggtheme = theme_minimal(),
#              main = "K-means clustering of documents")

# confusion matrix
clusters.kmeans <- res.kmeans$cluster
table(clusters.kmeans, bbc_labels)
```

## Spherical K-means

```{r}
# we use skmeans, and k = 5
library(skmeans)
set.seed(123)
res.skmeans <- skmeans(bbc_jose, 5)
# confusion matrix
clusters.skmeans <- res.skmeans$cluster
table(clusters.skmeans, bbc_labels)
```

## von-Mises Fisher Mixture Model

```{r}
# we use movMF, and k = 5
library(movMF)
set.seed(123)
res.movMF <- movMF(bbc_jose, 5, kappa=list(common = TRUE))
# TODO: explore the other params of movMF
clusters.movMF <- apply(res.movMF$P,1,which.max)
# confusion matrix
table(clusters.movMF, bbc_labels)
```

## Hierarchical clustering

```{r}
# we use hclust, and k = 5
res.hclust <- hclust(dist(bbc_jose), method = "ward.D2")
# confusion matrix
clusters.hclust <- cutree(res.hclust, 5)
table(clusters.hclust, bbc_labels)
```

```{r}
```
